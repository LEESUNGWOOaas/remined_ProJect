<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	<mapper namespace="com.level.admin.board.service.impl.BoardMapper">
		<select id="selectBoardInfo" parameterType="boardInfoVO" resultType="boardInfoVO">
			select board_info_no,
				   board_title,
				   user_yn,
				   popup_yn
				   
			from board_info
			
			where board_title = #{boardTitle}
		</select>
		
		<select id="selectBoardInfoList" parameterType="boardInfoVO" resultType="boardInfoVO">
			select board_info_no,
				   board_title,
				   user_yn,
				   popup_yn
			
			from board_info
			
			where delete_yn = 'N'
			and order by DESC
			
		</select>
		
		<select id="selectBoardList" parameterType="boardVO" resultType="boardVO">
			select board_no,
				title,
				content,
				process,
				insert_date
				
			from board
			
			where delete_yn='N'
			<if test="searchKeyword != null and searchKeyword != '' ">
        	and ${searchType} like CONCAT('%', #{searchKeyword}, '%')
        	</if>
        ORDER BY board_no desc 
             <if test="pageVO != null">
        limit #{pageVO.startNo}, #{pageVO.listSize}
        </if>
		</select>	
		
		<select id="selectBoardListCount" parameterType="boardVO" resultType="int">
			select count(*)
			from board
			where board_no = #{boardNo}
			<if test="searchKeyword != null and searchKeyword != '' ">
        	and ${searchType} like CONCAT('%', #{searchKeyword}, '%')
        	</if>
		</select>
		
		<insert id="insert" parameterType="boardVO" useGeneratedKeys="true" keyProperty="boardNo">
			insert into 
				set title = #{title},
					content = #{content},
					insert_date = now()
		</insert>
		
		<update id="update" parameterType="boardVO">
			update board
			set	   title = #{title},
				   content = #{content},
				   insert_date = now()
			
			where  board_no=#{boardNo}
		</update>
		
		<update id="delete" parameterType="boardVO">
			update board
			
			   set delete_yn = 'Y'
			   
			 where board_no = #{boardNo}
		</update>
	</mapper>